<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Keyboard</title>
    <link rel="stylesheet" href="./style.css" />
    <button id="start" style="float: left">Start</button>
    <div id="playContainer">
      <button
        id="playBTN"
        onclick="playMelody(myMelody,snappedMelody=[],isSnapped=false); switchButtons(true)"
        type="button"
      >
        Play
      </button>
    </div>
    <div id="icon">
      <button
        type="button"
        value="piano"
        onclick="getIcon(this.value)"
        style="width: 100%"
      >
        Piano
      </button>
      <button
        type="button"
        value="guitar"
        onclick="getIcon(this.value)"
        style="width: 100%"
      >
        Guitar
      </button>
      <button
        type="button"
        value="bells"
        onclick="getIcon(this.value)"
        style="width: 100%"
      >
        Bells
      </button>
    </div>
    <button id="Vconnect">Vertical Snap</button>
    <button id="Hconnect">Horizontal Snap</button>
    <button id="disconnect">UnSnap</button>
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>
    <script src="Note.js"></script>
    <script src="Track.js"></script>
    <script src="functions.js"></script>
    <script src="script.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();
        var receivedSections;
        document.getElementById('Vconnect').addEventListener('click',function(){
          socket.emit('Song',getSongSection());
          socket.emit('Vsnap',getMelody(snapped));
        });
        document.getElementById('Hconnect').addEventListener('click',function(){
          socket.emit('Hsnap',getMelody(snapped));
        });
        document.getElementById('disconnect').addEventListener('click',function(){
          snappedMelody = [];
          snapped = false;
        });
        socket.on('Song',function(songSections){
          receivedSections = songSections;
        })
        socket.on('Vsnap',function(Melodies){
          snappedMelody = constructMelody(Melodies, false);
          snapped = true;
          receivedSections = [];
        });
        socket.on('Hsnap',function(Melodies){
          snappedMelody = constructMelody(Melodies, true);
          snapped = true;
        });
    </script>
  </body>
</html>
